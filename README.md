# üß© Mini-Projeto Fullstack Parte I/II.v2 ‚Äî Backend com PostgreSQL


## üü£ Descri√ß√£o Geral

Este projeto √© a **continua√ß√£o das Partes I e II** do Mini-Projeto Fullstack, com o objetivo de **substituir o banco de dados MongoDB por PostgreSQL**, mantendo toda a estrutura funcional e l√≥gica da API.  

A aplica√ß√£o backend foi desenvolvida em **Node.js + Express**, com autentica√ß√£o via **JWT**, e conex√£o gerenciada com **PostgreSQL** utilizando a biblioteca `pg`.  

Todo o CRUD de usu√°rios e notas foi mantido, assim como os logs, tratamento de erros e as requisi√ß√µes via Insomnia.

---

## üü£ Tecnologias Utilizadas

| Categoria | Tecnologias |
|------------|--------------|
| **Backend** | Node.js, Express.js |
| **Banco de Dados** | PostgreSQL |
| **Autentica√ß√£o** | JSON Web Token (JWT) |
| **Ambiente** | dotenv, nodemon |
| **Driver de Conex√£o** | pg (Node-Postgres) |
| **Testes de API** | Insomnia |
| **Hospedagem** | Vercel |

---

## üü£ Estrutura de Pastas

![alt text](src/img/image-1.png)

---

## üü£ Funcionalidades Implementadas

- ‚úÖ **Cadastro e Login de usu√°rios** com hash de senha e autentica√ß√£o JWT  
- ‚úÖ **CRUD completo** de anota√ß√µes
- ‚úÖ **Rotas protegidas por token JWT** (somente o usu√°rio autenticado acessa suas pr√≥prias anota√ß√µes)  
- ‚úÖ **Tratamento de erros e respostas HTTP apropriadas**  
- ‚úÖ **Logs de a√ß√µes e erros no terminal**  
- ‚úÖ **Utiliza√ß√£o de vari√°veis de ambiente com dotenv**  
- ‚úÖ **Hospedagem funcional (Vercel)**  

---

## üü£ Rotas da API

### Autentica√ß√£o

| M√©todo | Rota            | Descri√ß√£o                          | Autentica√ß√£o |
|:--:|:--|:--|:--:|
| **POST** | `/api/register` | Registra um novo usu√°rio           |  ‚ùå
| **POST** | `/api/login`    | Realiza o login e gera o token JWT | ‚ùå
| **GET**  | `/api/profile`  | Retorna o perfil do usu√°rio logado | ‚úÖ


### Usu√°rio
| M√©todo | Rota | Descri√ß√£o | Autentica√ß√£o |
|:--:|:--|:--|:--:|
| **GET**  | `/api/users` | Lista todos os usu√°rios (rota protegida) | ‚úÖ


### Notas
| M√©todo | Rota | Descri√ß√£o | Autentica√ß√£o |
|:--:|:--|:--|:--:|
| **POST** | `/api/notes` | Cria uma nova nota | ‚úÖ |
| **GET** | `/api/notes` | Lista todas as notas do usu√°rio autenticado | ‚úÖ |
| **GET** | `/api/notes?title=...` | Filtra notas por t√≠tulo | ‚úÖ |
| **GET** | `/api/notes/:id` | Retorna uma nota espec√≠fica | ‚úÖ |
| **PUT** | `/api/notes/:id` | Atualiza todos os dados de uma nota existente | ‚úÖ |
| **PATCH** | `/api/notes/:id` | Atualiza parcialmente uma nota | ‚úÖ |
| **DELETE** | `/api/notes/:id` | Remove uma nota do usu√°rio autenticado | ‚úÖ |

---

## üü£ Vari√°veis de Ambiente (.env)

```env
DATABASE_URL= url do banco
JWT_SECRET= chave_jwt
PORT= 3000
```
Obs.: No ambiente de produ√ß√£o, a vari√°vel **DATABASE_URL** foi substitu√≠da pela string do banco em nuvem (Neon).

---

## üü£ Modelagem do Banco de Dados

![alt text](src/img/image-2.png)

> O gerenciamento do banco de dados em ambiente local foi realizado com o **pgAdmin 4**, permitindo a cria√ß√£o das tabelas, consultas SQL e acompanhamento das inser√ß√µes durante os testes.

---
## üü£ Como Executar Localmente

1. **Clone o reposit√≥rio**
```bash
   git clone https://github.com/Nathalia1234/backend-express-postgresql.git
```

2. **Acesse o diret√≥rio do projeto**
```bash
cd backend-express-postgresql
```

3. **Instale as depend√™ncias**
```bash
npm install
```

4. **Configure o arquivo .env**
```bash
DATABASE_URL= url do banco
JWT_SECRET=chave_jwt
PORT=3000
```

5. **Inicie o servidor**
```bash
npm start
```

6. **Acesse a API**
```bash
http://localhost:3000
```
---
## üü£ Testes de Requisi√ß√£o (Insomnia)

Foram criados dois ambientes no Insomnia:
- **Local:** `http://localhost:3000`
- **Produ√ß√£o:** ``

Em ambos:

Header:  ```Authorization: Bearer {{token_local}}```


A pasta `requests/` cont√©m todas as requisi√ß√µes (local e produ√ß√£o).

![alt text](./src/img/image.png)

- [üìÑ Download requests.yaml](./requests/requests.yaml)

---

## üü£ Hospedagem e Acesso

Backend em Produ√ß√£o (Vercel):

Banco de Dados em Produ√ß√£o:  **Neon.tech** (plataforma gratuita de hospedagem PostgreSQL)

Base URL Local: http://localhost:3000

Backend em Produ√ß√£o no meu dom√≠nio pessoal: 

---

## üü£ Deploy (Vercel)
- Subir o projeto para o GitHub

- Importar o reposit√≥rio na plataforma [Vercel](https://vercel.com/) (garantindo integra√ß√£o direta com o reposit√≥rio GitHub e execu√ß√£o est√°vel da API em ambiente de produ√ß√£o.)

- Configurar vari√°veis de ambiente:
    - DATABASE_URL ‚Üí string do banco Neon
    - JWT_SECRET ‚Üí chave secreta para JWT
    - PORT ‚Üí 3000

Obs.: Foi utilizado o banco em nuvem **Neon.tech** para armazenamento de dados em produ√ß√£o.

- Ap√≥s o deploy, o backend ser√° acess√≠vel no vercel.

---

## üü£ V√≠deo de Demonstra√ß√£o

O v√≠deo da entrega demonstra:

- Execu√ß√£o das requisi√ß√µes no Insomnia (localmente e em produ√ß√£o);

- Exibi√ß√£o dos logs (localmente e em produ√ß√£o);

- Visualiza√ß√£o dos dados cadastrados no pgAdmin;

- Rotas CRUD protegidas com JWT.


üîó [Assista ao v√≠deo de demonstra√ß√£o]()

---